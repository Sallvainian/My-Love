{
  "dimension": "determinism",
  "score": 25,
  "max_score": 100,
  "grade": "F",
  "violations": [
    {
      "file": "tests/e2e/scripture/scripture-accessibility.spec.ts",
      "line": 193,
      "severity": "MEDIUM",
      "category": "hard-wait",
      "description": "waitForTimeout() introduces timing flakiness.",
      "suggestion": "Replace with condition-based waits (locator assertions / waitForResponse).",
      "code_snippet": "      // Wait briefly for any potential update\n      await page.waitForTimeout(300);\n"
    },
    {
      "file": "tests/e2e/scripture/scripture-overview.spec.ts",
      "line": 135,
      "severity": "MEDIUM",
      "category": "time-dependency",
      "description": "new Date() is used in test logic; behavior can drift over time.",
      "suggestion": "Prefer deterministic timestamps or controlled clock utilities.",
      "code_snippet": "              partner_id: null,\n              updated_at: new Date().toISOString(),\n            }),"
    },
    {
      "file": "tests/e2e/scripture/scripture-overview.spec.ts",
      "line": 176,
      "severity": "MEDIUM",
      "category": "time-dependency",
      "description": "new Date() is used in test logic; behavior can drift over time.",
      "suggestion": "Prefer deterministic timestamps or controlled clock utilities.",
      "code_snippet": "              partner_id: partnerId,\n              updated_at: new Date().toISOString(),\n            }),"
    },
    {
      "file": "tests/e2e/scripture/scripture-reflection-2.3.spec.ts",
      "line": 152,
      "severity": "MEDIUM",
      "category": "time-dependency",
      "description": "new Date() is used in test logic; behavior can drift over time.",
      "suggestion": "Prefer deterministic timestamps or controlled clock utilities.",
      "code_snippet": "              partner_id: null,\n              updated_at: new Date().toISOString(),\n            }),"
    },
    {
      "file": "tests/e2e/scripture/scripture-rls-security.spec.ts",
      "line": 87,
      "severity": "HIGH",
      "category": "time-dependency",
      "description": "Date.now() is used without explicit clock control.",
      "suggestion": "Inject fixed timestamps or mock system time for repeatability.",
      "code_snippet": "      const { data: newUser } = await supabaseAdmin.auth.admin.createUser({\n        email: `outsider-${Date.now()}@test.example.com`,\n        password: 'testpassword123',"
    },
    {
      "file": "tests/e2e/scripture/scripture-rls-security.spec.ts",
      "line": 149,
      "severity": "HIGH",
      "category": "time-dependency",
      "description": "Date.now() is used without explicit clock control.",
      "suggestion": "Inject fixed timestamps or mock system time for repeatability.",
      "code_snippet": "      const { data: newUser } = await supabaseAdmin.auth.admin.createUser({\n        email: `outsider-refl-${Date.now()}@test.example.com`,\n        password: 'testpassword123',"
    },
    {
      "file": "tests/e2e/scripture/scripture-rls-security.spec.ts",
      "line": 182,
      "severity": "HIGH",
      "category": "time-dependency",
      "description": "Date.now() is used without explicit clock control.",
      "suggestion": "Inject fixed timestamps or mock system time for repeatability.",
      "code_snippet": "      const { data: newUser } = await supabaseAdmin.auth.admin.createUser({\n        email: `outsider-ins-${Date.now()}@test.example.com`,\n        password: 'testpassword123',"
    },
    {
      "file": "tests/e2e/scripture/scripture-rls-security.spec.ts",
      "line": 217,
      "severity": "HIGH",
      "category": "time-dependency",
      "description": "Date.now() is used without explicit clock control.",
      "suggestion": "Inject fixed timestamps or mock system time for repeatability.",
      "code_snippet": "      const { data: newUser } = await supabaseAdmin.auth.admin.createUser({\n        email: `outsider-bm-${Date.now()}@test.example.com`,\n        password: 'testpassword123',"
    },
    {
      "file": "tests/e2e/scripture/scripture-session.spec.ts",
      "line": 79,
      "severity": "HIGH",
      "category": "time-dependency",
      "description": "Date.now() is used without explicit clock control.",
      "suggestion": "Inject fixed timestamps or mock system time for repeatability.",
      "code_snippet": "        .from('scripture_sessions')\n        .update({ started_at: new Date(Date.now() + 60 * 60 * 1000).toISOString() })\n        .eq('id', sessionId);"
    },
    {
      "file": "tests/e2e/scripture/scripture-session.spec.ts",
      "line": 79,
      "severity": "MEDIUM",
      "category": "time-dependency",
      "description": "new Date() is used in test logic; behavior can drift over time.",
      "suggestion": "Prefer deterministic timestamps or controlled clock utilities.",
      "code_snippet": "        .from('scripture_sessions')\n        .update({ started_at: new Date(Date.now() + 60 * 60 * 1000).toISOString() })\n        .eq('id', sessionId);"
    }
  ],
  "passed_checks": 174,
  "failed_checks": 10,
  "total_checks": 184,
  "violation_summary": {
    "HIGH": 5,
    "MEDIUM": 5,
    "LOW": 0
  },
  "recommendations": [
    "Replace waitForTimeout with event/expect-based synchronization.",
    "Avoid Date.now/new Date in assertions without clock control.",
    "Use deterministic test data builders for repeatable runs."
  ],
  "summary": "determinism analysis found 10 violation(s): 5 HIGH, 5 MEDIUM, 0 LOW."
}