{
  "dimension": "coverage",
  "score": 62,
  "max_score": 100,
  "grade": "D",
  "violations": [
    {
      "file": "tests/e2e/scripture/scripture-reflection-2.3.spec.ts",
      "line": 173,
      "severity": "HIGH",
      "category": "missing-readiness-coverage",
      "description": "Tests assume partner-complete report readiness but do not validate backend completion preconditions before asserting partner UI.",
      "suggestion": "Add explicit readiness verification (session complete + partner shared payload persisted) before report assertions.",
      "code_snippet": "// THEN: Partner message is displayed"
    },
    {
      "file": "tests/e2e/scripture/scripture-overview.spec.ts",
      "line": 211,
      "severity": "MEDIUM",
      "category": "resume-source-coverage-gap",
      "description": "No explicit assertion verifies that resume prompt binds to the session created in this test rather than another in-progress session.",
      "suggestion": "Capture and assert resume session id/current_step_index through API before UI expectation.",
      "code_snippet": "await saveSoloSessionAtStep(page, 7);"
    },
    {
      "file": "tests/e2e/scripture/scripture-reflection-2.3.spec.ts",
      "line": 270,
      "severity": "MEDIUM",
      "category": "branch-coverage-gap",
      "description": "Together-mode side-by-side assertions do not cover waiting-state transitions explicitly, leading to ambiguous failure signals.",
      "suggestion": "Split into two tests: waiting-state expected branch and partner-complete expected branch with strict preconditions.",
      "code_snippet": "await expect(page.getByTestId('scripture-report-rating-step-0')).toContainText('5');"
    }
  ],
  "passed_checks": 5,
  "failed_checks": 3,
  "total_checks": 8,
  "violation_summary": {
    "HIGH": 1,
    "MEDIUM": 2,
    "LOW": 0
  },
  "coverage_gaps": {
    "untested_preconditions": [
      "Partner session completion gate before report assertions",
      "Resume prompt session identity binding"
    ],
    "missing_branch_validation": [
      "Waiting state vs partner-complete report branch"
    ]
  },
  "recommendations": [
    "Add precondition probes in tests before UI expectations.",
    "Decompose multi-branch expectations into deterministic branch-specific tests.",
    "Use API assertions to validate state setup completeness."
  ],
  "summary": "Coverage gaps are concentrated in precondition and branch-state validation for resume and partner-report scenarios."
}
