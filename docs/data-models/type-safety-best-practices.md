# Type Safety Best Practices

## Generic Service Types

```typescript
// Base service interface for CRUD operations
interface CRUDService<T, CreateDTO, UpdateDTO> {
  create(data: CreateDTO): Promise<T>;
  read(id: string): Promise<T | null>;
  update(id: string, data: UpdateDTO): Promise<T>;
  delete(id: string): Promise<boolean>;
  list(options?: ListOptions): Promise<T[]>;
}

interface ListOptions {
  limit?: number;
  offset?: number;
  orderBy?: string;
  orderDirection?: 'asc' | 'desc';
}
```

## Discriminated Unions for State

```typescript
// Loading state pattern
type AsyncState<T> =
  | { status: 'idle' }
  | { status: 'loading' }
  | { status: 'success'; data: T }
  | { status: 'error'; error: string };

// Used in components
const [photoState, setPhotoState] = useState<AsyncState<Photo[]>>({ status: 'idle' });
```

## Type Guards

```typescript
// Type guard for mood validation
function isMoodType(value: string): value is MoodType {
  return [
    'happy',
    'content',
    'excited',
    'loved',
    'grateful',
    'peaceful',
    'sad',
    'anxious',
    'frustrated',
    'tired',
    'stressed',
    'lonely',
  ].includes(value);
}

// Type guard for interactions
function isValidInteraction(obj: unknown): obj is Interaction {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    'id' in obj &&
    'type' in obj &&
    (obj.type === 'poke' || obj.type === 'kiss')
  );
}
```

---

**Generated by BMAD document-project workflow**
**Scan Level**: Exhaustive (all type definitions analyzed)
