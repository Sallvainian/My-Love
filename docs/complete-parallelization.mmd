flowchart TD
    %% Epic 1 - Foundation
    subgraph E1[Epic 1: Foundation]
        1.1[1.1 Project Init]
        1.2[1.2 Supabase Client]
        1.3[1.3 Magic Link]
        1.4[1.4 Session Mgmt]
        1.5[1.5 Network Status]

        1.1 --> 1.2
        1.2 --> 1.3
        1.2 --> 1.5
        1.3 --> 1.4
    end

    %% Epic 2 - Love Notes (Sequential)
    subgraph E2[Epic 2: Love Notes]
        2.1[2.1 Chat UI]
        2.2[2.2 Send Message]
        2.3[2.3 Real-time Rx]
        2.4[2.4 History/Scroll]

        2.1 --> 2.2 --> 2.3 --> 2.4
    end

    %% Epic 3 - Push Notifications
    subgraph E3[Epic 3: Push Notifications]
        3.1[3.1 Permission]
        3.2[3.2 Token Reg]
        3.3[3.3 Love Note Push]
        3.4[3.4 Daily Msg Push]
        3.5[3.5 Deep Links]
        3.6[3.6 In-App History]

        3.1 --> 3.2
        3.2 --> 3.3
        3.2 --> 3.4
        3.3 --> 3.5
        3.4 --> 3.5
        3.5 --> 3.6
    end

    %% Epic 4 - Dashboard (High Parallelization)
    subgraph E4[Epic 4: Dashboard]
        4.1[4.1 Feature Hub]
        4.2[4.2 Days Counter]
        4.3[4.3 Partner Mood]
        4.4[4.4 Daily Message]
        4.5[4.5 Network Status]

        4.1 --> 4.2
        4.1 --> 4.3
        4.1 --> 4.4
        4.1 --> 4.5
    end

    %% Epic 5 - Mood Tracking
    subgraph E5[Epic 5: Mood Tracking]
        5.1[5.1 Emoji Picker]
        5.2[5.2 Quick Logging]
        5.3[5.3 Partner View]
        5.4[5.4 History]

        5.1 --> 5.2
        5.2 --> 5.3
        5.2 --> 5.4
    end

    %% Epic 6 - Photo Gallery (Sequential)
    subgraph E6[Epic 6: Photo Gallery]
        6.1[6.1 Selection]
        6.2[6.2 Upload]
        6.3[6.3 Grid View]
        6.4[6.4 Full Screen]

        6.1 --> 6.2 --> 6.3 --> 6.4
    end

    %% Epic 7 - Settings (Split)
    subgraph E7[Epic 7: Settings]
        7.1[7.1 Theme Toggle]
        7.3[7.3 Biometric]
        7.5[7.5 Profile]
        7.2[7.2 Notif Prefs]
        7.4[7.4 Poke/Kiss]
    end

    %% Cross-Epic Dependencies
    1.2 --> 2.1
    1.2 --> 4.1
    1.2 --> 5.1
    1.2 --> 6.1
    1.2 --> 7.1
    1.2 --> 7.5
    1.3 --> 3.1
    1.3 --> 7.3
    1.5 --> 4.1
    2.3 --> 3.3
    3.1 --> 7.2
    3.2 --> 7.4

    %% Styling
    style E1 fill:#FFE5E5,stroke:#FF6B6B,stroke-width:3px
    style E2 fill:#E5F9F6,stroke:#4ECDC4,stroke-width:2px
    style E3 fill:#E5F3FF,stroke:#45B7D1,stroke-width:2px
    style E4 fill:#E5F9F6,stroke:#4ECDC4,stroke-width:2px
    style E5 fill:#E5F9F6,stroke:#4ECDC4,stroke-width:2px
    style E6 fill:#E5F9F6,stroke:#4ECDC4,stroke-width:2px
    style E7 fill:#F0FFE5,stroke:#96CEB4,stroke-width:2px

    %% Parallel story highlighting
    classDef parallel fill:#90EE90,stroke:#228B22,stroke-width:2px
    class 1.3,1.5,3.3,3.4,4.2,4.3,4.4,4.5,5.3,5.4,7.1,7.2,7.3,7.4,7.5 parallel
