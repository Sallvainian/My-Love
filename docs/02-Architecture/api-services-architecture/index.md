# API & Services Layer Architecture Report

## Table of Contents

- [API & Services Layer Architecture Report](#table-of-contents)
  - [My-Love Application - Comprehensive Technical Documentation](./my-love-application-comprehensive-technical-documentation.md)
  - [Table of Contents](./table-of-contents.md)
  - [Executive Summary](./executive-summary.md)
  - [API Layer Architecture](./api-layer-architecture.md)
    - [1. Supabase Client ()](./api-layer-architecture.md#1-supabase-client)
    - [2. Authentication Service ()](./api-layer-architecture.md#2-authentication-service)
    - [3. Mood API Service ()](./api-layer-architecture.md#3-mood-api-service)
    - [4. Mood Sync Service ()](./api-layer-architecture.md#4-mood-sync-service)
    - [5. Partner Service ()](./api-layer-architecture.md#5-partner-service)
    - [6. Interaction Service ()](./api-layer-architecture.md#6-interaction-service)
    - [7. Error Handlers ()](./api-layer-architecture.md#7-error-handlers)
    - [8. Validation Schemas ()](./api-layer-architecture.md#8-validation-schemas)
      - [User Schemas](./api-layer-architecture.md#user-schemas)
      - [Mood Schemas](./api-layer-architecture.md#mood-schemas)
      - [Interaction Schemas](./api-layer-architecture.md#interaction-schemas)
      - [Timestamp Validation](./api-layer-architecture.md#timestamp-validation)
  - [Services Layer Architecture](./services-layer-architecture.md)
    - [1. Base IndexedDB Service ()](./services-layer-architecture.md#1-base-indexeddb-service)
    - [2. Storage Service ()](./services-layer-architecture.md#2-storage-service)
    - [3. Photo Storage Service ()](./services-layer-architecture.md#3-photo-storage-service)
    - [4. Custom Message Service ()](./services-layer-architecture.md#4-custom-message-service)
    - [5. Mood Service ()](./services-layer-architecture.md#5-mood-service)
    - [6. Sync Service ()](./services-layer-architecture.md#6-sync-service)
    - [7. Realtime Service ()](./services-layer-architecture.md#7-realtime-service)
    - [8. Migration Service ()](./services-layer-architecture.md#8-migration-service)
    - [9. Image Compression Service ()](./services-layer-architecture.md#9-image-compression-service)
    - [10. Performance Monitor ()](./services-layer-architecture.md#10-performance-monitor)
  - [Authentication & Authorization Flow](./authentication-authorization-flow.md)
    - [Sign-Up Flow](./authentication-authorization-flow.md#sign-up-flow)
    - [Sign-In Flow](./authentication-authorization-flow.md#sign-in-flow)
    - [Google OAuth Flow](./authentication-authorization-flow.md#google-oauth-flow)
    - [Row Level Security (RLS)](./authentication-authorization-flow.md#row-level-security-rls)
  - [Real-time Sync Capabilities](./real-time-sync-capabilities.md)
    - [Real-time Architecture](./real-time-sync-capabilities.md#real-time-architecture)
    - [Partner Mood Updates (Real-time)](./real-time-sync-capabilities.md#partner-mood-updates-real-time)
    - [Interaction Updates (Real-time)](./real-time-sync-capabilities.md#interaction-updates-real-time)
    - [Subscription Management](./real-time-sync-capabilities.md#subscription-management)
  - [IndexedDB Service Patterns](./indexeddb-service-patterns.md)
    - [Service Hierarchy](./indexeddb-service-patterns.md#service-hierarchy)
    - [Initialization Pattern](./indexeddb-service-patterns.md#initialization-pattern)
    - [CRUD Operations](./indexeddb-service-patterns.md#crud-operations)
    - [Database Versions & Migrations](./indexeddb-service-patterns.md#database-versions-migrations)
  - [Error Handling Strategies](./error-handling-strategies.md)
    - [API Layer Error Handling](./error-handling-strategies.md#api-layer-error-handling)
    - [Service Layer Error Handling](./error-handling-strategies.md#service-layer-error-handling)
    - [Offline-First Error Messages](./error-handling-strategies.md#offline-first-error-messages)
  - [Data Migration Patterns](./data-migration-patterns.md)
    - [1. LocalStorage → IndexedDB (One-time)](./data-migration-patterns.md#1-localstorage-indexeddb-one-time)
    - [2. IndexedDB Schema v1 → v2 (Photos)](./data-migration-patterns.md#2-indexeddb-schema-v1-v2-photos)
    - [3. IndexedDB v2 → v3 (Add Moods)](./data-migration-patterns.md#3-indexeddb-v2-v3-add-moods)
  - [Performance Monitoring](./performance-monitoring.md)
    - [Measured Operations](./performance-monitoring.md#measured-operations)
    - [Performance Report Example](./performance-monitoring.md#performance-report-example)
  - [Appendix: Type Definitions](./appendix-type-definitions.md)
    - [Core Entity Types](./appendix-type-definitions.md#core-entity-types)
  - [Summary](./summary.md)
